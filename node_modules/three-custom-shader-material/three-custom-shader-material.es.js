import { jsx as d } from "react/jsx-runtime";
import * as o from "react";
import a from "./vanilla/three-custom-shader-material.es.js";
function l(r, e) {
  const t = o.useRef(!1);
  o.useEffect(() => {
    if (t.current)
      return r();
    t.current = !0;
  }, e);
}
function R({
  baseMaterial: r,
  vertexShader: e,
  fragmentShader: t,
  uniforms: f,
  cacheKey: i,
  patchMap: s,
  attach: m,
  ...n
}, c) {
  const u = o.useMemo(() => new a({
    baseMaterial: r,
    vertexShader: e,
    fragmentShader: t,
    uniforms: f,
    cacheKey: i,
    patchMap: s,
    ...n
  }), [r]);
  return l(() => {
    u.update({
      vertexShader: e,
      fragmentShader: t,
      uniforms: f,
      patchMap: s,
      cacheKey: i
    });
  }, [e, t, f, s, i]), o.useEffect(() => () => u.dispose(), [u]), /* @__PURE__ */ d(
    "primitive",
    {
      ref: c,
      attach: m ?? "material",
      object: u,
      ...n
    }
  );
}
const j = o.forwardRef(R);
export {
  j as default
};
//# sourceMappingURL=three-custom-shader-material.es.js.map
